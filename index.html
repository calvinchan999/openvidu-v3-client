<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Robot Audio Recorder</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <img width="40" alt="Logo" src="assets/images/rv-icon.svg" />
            <h1>Robot Audio Recorder</h1>
        </div>

        <div class="status-panel">
            <div class="status-item">
                <span class="label">Connection Status:</span>
                <span class="value" id="connection-status">Disconnected</span>
            </div>
            <div class="status-item">
                <span class="label">Session ID:</span>
                <span class="value" id="session-id">-</span>
            </div>
            <div class="status-item">
                <span class="label">Robot Name:</span>
                <span class="value" id="robot-name">-</span>
            </div>
        </div>

        <div class="controls">
            <button class="control-btn" id="speaker-btn">
                <i class="icon" id="speaker-icon">ðŸ”Š</i>
                <span id="speaker-text">Mute Speaker</span>
            </button>
            <button class="control-btn" id="microphone-btn">
                <i class="icon" id="microphone-icon">ðŸŽ¤</i>
                <span id="microphone-text">Mute Microphone</span>
            </button>
        </div>

        <div class="device-selection" id="device-selection" style="display: none;">
            <div class="device-group">
                <label for="audio-device-select">Audio Input Device:</label>
                <select id="audio-device-select" class="device-select">
                    <option value="">Default Microphone</option>
                </select>
            </div>
            <div class="device-group">
                <label for="audio-output-device-select">Audio Output Device:</label>
                <select id="audio-output-device-select" class="device-select">
                    <option value="">Default Speaker</option>
                </select>
                <button class="control-btn small" id="refresh-devices-btn">ðŸ”„</button>
            </div>
        </div>

        <div class="streams-container" id="streams-container">
            <!-- Audio streams will be dynamically added here -->
        </div>

        <!-- Loading indicator -->
        <div class="loading" id="loading" style="display: none;">
            <div class="spinner"></div>
            <span>Connecting...</span>
        </div>

        <!-- Error message -->
        <div class="error-message" id="error-message" style="display: none;">
            <span id="error-text"></span>
            <button id="retry-btn">Retry Connection</button>
        </div>
    </div>

    <!-- Include LiveKit Client SDK for OpenVidu v3 -->
    <script src="https://unpkg.com/livekit-client@2.15.5/dist/livekit-client.umd.js"></script>
    
    <!-- Application Scripts -->
    <script src="js/config-service.js"></script>
    <script src="js/openvidu-service.js"></script>
    <script src="js/audio-stream-manager.js"></script>
    <script src="js/app.js"></script>
</body>
</html>